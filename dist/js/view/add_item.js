define(["vendor/tpl!../../templates/add_item.html","app","facebook"],function(a){var b=Backbone.View.extend({events:{"click .submit-btn":"sendToParse"},template:a,id:"add",initialize:function(a){this.options=a,Parse.initialize("pgIVxlWiJTswWbYnHqclimNwHZwdShkL48VmHZ8G","Km1O6v0inoToEdisAMV80HoxEKIMwMUB3Yt5G1TG"),console.log(this.options)},sendToParse:function(a){a.preventDefault(),console.log(a),console.log("Sending to parse!");var b=Parse.Object.extend("Bullion"),c=new b;c.set("uid",sessionStorage.uid),c.set("metal",$(".metal_type").html()),c.set("type",$(".coin_type").val()),c.set("purchase_date",$(".purch_date").val()),c.set("qty",parseFloat($(".qty").val())),c.set("premium",$(".premium").val()),c.set("unit_price",parseFloat($(".unit_price").val()));var d=parseFloat($(".percent").val());c.set("bullion_percent",d);var e=parseFloat($(".weight").val());c.set("weight_per_unit",e);var f=parseFloat((d*e).toFixed(2));c.set("bullion_gpu",f);var g=parseFloat((d*e/31.3).toFixed(2));c.set("bullion_ozpu",g),console.log(FB.getUserID()),console.log(c);var h=this;c.save(null,{success:function(a){console.log("success: "+a.id),window.location.replace("#/dashboard/stack/"+h.options.pageId)},failure:function(a,b){console.error("failure: "+b)}})},render:function(){return this.$el.html(this.template({})),this},close:function(){this.remove(),this.unbind(),this.model&&this.model.unbind("change",this.modelChanged)}});return b});
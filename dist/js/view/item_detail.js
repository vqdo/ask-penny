define(["vendor/tpl!../../templates/item_detail.html","model/item","app","facebook"],function(a,b){var c=Backbone.View.extend({events:{"click .delete-btn":"deleteToParse","click .update-btn":"updateToParse"},template:a,initialize:function(a){Parse.initialize("pgIVxlWiJTswWbYnHqclimNwHZwdShkL48VmHZ8G","Km1O6v0inoToEdisAMV80HoxEKIMwMUB3Yt5G1TG"),this.options=a,this.model=new b(a.dbID);var c=this;this.model.fetch(a.itemId).then(function(){console.log(this),c.render()}),this.model.on("change",this.render,this);this.options.itemId},deleteToParse:function(a){var b=this;a.preventDefault(),console.log(a),console.log("Deleting to parse!"),this.model.del(b.options.itemId).then(function(){console.log(this),window.location.replace("#/dashboard/stack/"+b.options.pageId)})},updateToParse:function(a){var b=this;a.preventDefault(),console.log(a),console.log("Updating to parse!"),this.model.update(b.options.itemId).then(function(){console.log(this),window.location.replace("#/dashboard/stack/"+b.options.pageId)})},render:function(){return $.isEmptyObject(this.model.attributes)||(console.log(this.model.attributes),this.$el.html(this.template(this.model.attributes))),this},close:function(){this.remove(),this.unbind(),this.model&&this.model.unbind("change",this.modelChanged)}});return c});